<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta http-equiv="Pragma" content="no-cache" />
        <meta http-equiv="Expires" content="0" />

        <meta name="darkreader-lock">
        <link rel="icon" type="image/svg+xml" href="logo_white.svg" />
        <link rel="stylesheet" href="reset.css">
        <link rel="stylesheet" href="main.css">
        <link rel="stylesheet" href="dashboard.css">
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <script type="module" src="theme.js"></script>

        <title>Tanner's Dashboard</title>
    </head>
    <body>
        <div class="theme-switcher">
            <button class="theme-toggle" id="themeToggle" title="Toggle theme">üåô</button>
        </div>
        <div class="user-info">
            <!-- <span id="userEmail">Loading...</span> -->
            <a href="/api/logout">
                <button class="logout-btn">Logout</button>
            </a>
        </div>
        <main>
            <div>
            <img src="logo_white.svg" height="60" style="margin:0 0 20px 20px">
            </div>
            <!-- <svg id="logo" height="60" version="1.1" viewBox="0 0 12842 2564.3" xmlns="http://www.w3.org/2000/svg"> -->
            <!-- </svg> -->
            <div class="container">
                <div id="chart-container"> <!-- start of chart section -->
                    <div class="controls">
                        <div class="control-section">
                            <!-- <label for="itemSelect" class="item-label">Select Item:</label> -->
                            <div class="search-container">
                                <input type="text" id="itemSearch" placeholder="Search items..." oninput="filterItems()" autocomplete="off">
                                <button class="clear-search-btn" id="clearSearchBtn" onclick="clearSearch()" title="Clear search">√ó</button>
                            </div>
                            <span id="searchResultsCounter" class="search-results-counter"></span>
                            <button class="toggle-btn" id="prevItemBtn" onclick="navigateItem(-1)" title="Previous Item">‚Üê Prev</button>
                            <select id="itemSelect" onchange="onItemSelect()">
                                <option value="">Select an item...</option>
                            </select>
                            <button class="toggle-btn" id="nextItemBtn" onclick="navigateItem(1)" title="Next Item">Next ‚Üí</button>
                        </div>
                        <button class="toggle-btn" id="toggle-24" onclick="toggleLine('line24')">2-Year Trend</button>
                        <button class="toggle-btn" id="toggle-12" onclick="toggleLine('line12')">1-Year Trend</button>
                        <button class="toggle-btn" id="toggle-6" onclick="toggleLine('line6')">6-Month Trend</button>
                        <button class="toggle-btn" id="toggle-3" onclick="toggleLine('line3')">Custom Trend</button>
                        <button class="toggle-btn" onclick="resetView()">Show All</button>
                    </div>
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-line legend-line-24month"></div>
                            <span class="legend-text">2-Year Trend Line</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-line legend-line-12month"></div>
                            <span class="legend-text">1-Year Trend Line</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-line legend-line-6month"></div>
                            <span class="legend-text">6-Month Trend Line</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-line legend-line-custom"></div>
                            <span class="legend-text">Custom Trend Line</span>
                        </div>
                    </div> <!-- end legend -->

                    <div id="chart"></div>
                </div> <!-- end of chart section -->

                <div> <!-- start of statsContent -->
                    <div id="trendStats" class="trend-stats">
                        <h2 class="trend-stats-title">Future Trend Projections:</h2>
                        <div id="statsContent" class="stats-content"><!-- Statistics will be populated here --></div>
                            <div class="custom-calculations">
                                <div class="custom-stats-item">
                                    <div class="custom-stats-title">Custom Trend Projection</div>
                                    <div class="custom-quantity-main"><strong>Projected Quantity over 2 year:</strong></div>
                                    <div class="custom-quantity-main"><strong><span id="customTotalQuantity">1</span></strong></div>
                                    <div class="custom-stats-detail">Projected Average Monthly:</div>
                                    <div class="custom-stats-detail"><span id="customAvgQuantity">1.00</span></div>
                                    <div class="custom-stats-formula">Formula: <span id="customFormula">y = 1.00 + 0.00x</span></div>
                                </div>
                                <div class="control-group">
                                    <!-- <label for="interceptSlider" class="control-label"> -->
                                    <!--     Starting Value (Intercept) -->
                                    <!-- </label> -->
                                    <div class="slider-labels">
                                        <span class="slider-label-top">High</span>
                                    </div>
                                    <div class="vertical-slider-container">
                                        <input type="range" id="interceptSlider" min="-199" max="200" value="0" step="5"
                                               oninput="updateCustomLine()" class="range-input">
                                    </div>
                                    <div class="slider-labels">
                                        <span class="slider-label-bottom">Low</span>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <!-- <label for="slopeSlider" class="control-label"> -->
                                    <!--     Trend Direction (Slope) -->
                                    <!-- </label> -->
                                    <div class="slider-labels">
                                        <span class="slider-label-top">Rising ‚Üó</span>
                                    </div>
                                    <div class="vertical-slider-container">
                                        <input type="range" id="slopeSlider" min="-9" max="10" value="0" step="0.5"
                                               oninput="updateCustomLine()" class="range-input">
                                    </div>
                                    <div class="slider-labels">
                                        <span class="slider-label-bottom">Falling ‚Üò</span>
                                    </div>
                                </div>
                            </div> <!-- end of custom-calculations -->
                    </div> <!-- end of trend stats -->
                </div> <!-- end of statsContent -->
                <div class="tooltip" id="tooltip"></div>
            </div> <!-- end of container -->
        </main>
        <script src="chart.js"></script>
    </body>
</html>
